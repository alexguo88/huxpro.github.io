<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>MySQL的binlog日志 | 最终幻想</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="binlog 基本认识MySQL的二进制日志可以说是MySQL最重要的日志了，它记录了所有的DDL和DML(除了数据查询语句)语句，以事件形式记录，还包含语句所执行的消耗的时间，MySQL的二进制日志是事务安全型的。 一般来说开启二进制日志大概会有1%的性能损耗(参见MySQL官方中文手册 5.1.24版)。二进制有两个最重要的使用场景:  其一：MySQL Replication在Master端">
<meta name="keywords" content="mysql,bin_log">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL的binlog日志">
<meta property="og:url" content="https://alexguo.net/2018/12/28/MySQL的binlog日志/index.html">
<meta property="og:site_name" content="最终幻想">
<meta property="og:description" content="binlog 基本认识MySQL的二进制日志可以说是MySQL最重要的日志了，它记录了所有的DDL和DML(除了数据查询语句)语句，以事件形式记录，还包含语句所执行的消耗的时间，MySQL的二进制日志是事务安全型的。 一般来说开启二进制日志大概会有1%的性能损耗(参见MySQL官方中文手册 5.1.24版)。二进制有两个最重要的使用场景:  其一：MySQL Replication在Master端">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-03-21T03:29:36.559Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MySQL的binlog日志">
<meta name="twitter:description" content="binlog 基本认识MySQL的二进制日志可以说是MySQL最重要的日志了，它记录了所有的DDL和DML(除了数据查询语句)语句，以事件形式记录，还包含语句所执行的消耗的时间，MySQL的二进制日志是事务安全型的。 一般来说开启二进制日志大概会有1%的性能损耗(参见MySQL官方中文手册 5.1.24版)。二进制有两个最重要的使用场景:  其一：MySQL Replication在Master端">
  
    <link rel="alternate" href="/atom.xml" title="最终幻想" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">最终幻想</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">远离舒适区，忙碌起来！</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://alexguo.net"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-MySQL的binlog日志" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/28/MySQL的binlog日志/" class="article-date">
  <time datetime="2018-12-28T06:58:46.000Z" itemprop="datePublished">2018-12-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/数据库/">数据库</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      MySQL的binlog日志
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="binlog-基本认识"><a href="#binlog-基本认识" class="headerlink" title="binlog 基本认识"></a>binlog 基本认识</h1><p>MySQL的二进制日志可以说是MySQL最重要的日志了，它记录了所有的DDL和DML(除了数据查询语句)语句，以事件形式记录，还包含语句所执行的消耗的时间，MySQL的二进制日志是事务安全型的。</p>
<pre><code>一般来说开启二进制日志大概会有1%的性能损耗(参见MySQL官方中文手册 5.1.24版)。二进制有两个最重要的使用场景: 
其一：MySQL Replication在Master端开启binlog，Mster把它的二进制日志传递给slaves来达到master-slave数据一致的目的。 
其二：自然就是数据恢复了，通过使用mysqlbinlog工具来使恢复数据。

二进制日志包括两类文件：二进制日志索引文件（文件名后缀为.index）用于记录所有的二进制文件，二进制日志文件（文件名后缀为.00000*）记录数据库所有的DDL和DML(除了数据查询语句)语句事件。 
</code></pre><h1 id="一、开启binlog日志："><a href="#一、开启binlog日志：" class="headerlink" title="一、开启binlog日志："></a>一、开启binlog日志：</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vi编辑打开mysql配置文件</span><br><span class="line">    # vi /usr/local/mysql/etc/my.cnf</span><br><span class="line">    在[mysqld] 区块</span><br><span class="line">    设置/添加 log-bin=mysql-bin  确认是打开状态(值 mysql-bin 是日志的基本名或前缀名)；</span><br><span class="line"></span><br><span class="line">    重启mysqld服务使配置生效</span><br><span class="line">    # pkill mysqld</span><br><span class="line">    # /usr/local/mysql/bin/mysqld_safe --user=mysql &amp;</span><br></pre></td></tr></table></figure>
<h1 id="二、也可登录mysql服务器，通过mysql的变量配置表，查看二进制日志是否已开启-单词：variable-ˈveriəbəl-变量"><a href="#二、也可登录mysql服务器，通过mysql的变量配置表，查看二进制日志是否已开启-单词：variable-ˈveriəbəl-变量" class="headerlink" title="二、也可登录mysql服务器，通过mysql的变量配置表，查看二进制日志是否已开启 单词：variable[ˈvɛriəbəl] 变量"></a>二、也可登录mysql服务器，通过mysql的变量配置表，查看二进制日志是否已开启 单词：variable[ˈvɛriəbəl] 变量</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">登录服务器</span><br><span class="line">    # /usr/local/mysql/bin/mysql -uroot -p123456</span><br><span class="line"></span><br><span class="line">    mysql&gt; show variables like &apos;log_%&apos;; </span><br><span class="line">    +----------------------------------------+---------------------------------------+</span><br><span class="line">    | Variable_name                          | Value                                 |</span><br><span class="line">    +----------------------------------------+---------------------------------------+</span><br><span class="line">    | log_bin                                | ON                                    | ------&gt; ON表示已经开启binlog日志</span><br><span class="line">    | log_bin_basename                       | /usr/local/mysql/data/mysql-bin       |</span><br><span class="line">    | log_bin_index                          | /usr/local/mysql/data/mysql-bin.index |</span><br><span class="line">    | log_bin_trust_function_creators        | OFF                                   |</span><br><span class="line">    | log_bin_use_v1_row_events              | OFF                                   |</span><br><span class="line">    | log_error                              | /usr/local/mysql/data/martin.err      |</span><br><span class="line">    | log_output                             | FILE                                  |</span><br><span class="line">    | log_queries_not_using_indexes          | OFF                                   |</span><br><span class="line">    | log_slave_updates                      | OFF                                   |</span><br><span class="line">    | log_slow_admin_statements              | OFF                                   |</span><br><span class="line">    | log_slow_slave_statements              | OFF                                   |</span><br><span class="line">    | log_throttle_queries_not_using_indexes | 0                                     |</span><br><span class="line">    | log_warnings                           | 1                                     |</span><br><span class="line">    +----------------------------------------+---------------------------------------+</span><br></pre></td></tr></table></figure>
<h1 id="三、常用binlog日志操作命令"><a href="#三、常用binlog日志操作命令" class="headerlink" title="三、常用binlog日志操作命令"></a>三、常用binlog日志操作命令</h1><h2 id="1-查看所有binlog日志列表"><a href="#1-查看所有binlog日志列表" class="headerlink" title="1.查看所有binlog日志列表"></a>1.查看所有binlog日志列表</h2><pre><code>mysql&gt; show master logs;
</code></pre><h2 id="2-查看master状态，即最后-最新-一个binlog日志的编号名称，及其最后一个操作事件pos结束点-Position-值"><a href="#2-查看master状态，即最后-最新-一个binlog日志的编号名称，及其最后一个操作事件pos结束点-Position-值" class="headerlink" title="2.查看master状态，即最后(最新)一个binlog日志的编号名称，及其最后一个操作事件pos结束点(Position)值"></a>2.查看master状态，即最后(最新)一个binlog日志的编号名称，及其最后一个操作事件pos结束点(Position)值</h2><pre><code>mysql&gt; show master status;
</code></pre><h2 id="3-刷新log日志，自此刻开始产生一个新编号的binlog日志文件"><a href="#3-刷新log日志，自此刻开始产生一个新编号的binlog日志文件" class="headerlink" title="3.刷新log日志，自此刻开始产生一个新编号的binlog日志文件"></a>3.刷新log日志，自此刻开始产生一个新编号的binlog日志文件</h2><pre><code>mysql&gt; flush logs;
注：每当mysqld服务重启时，会自动执行此命令，刷新binlog日志；在mysqldump备份数据时加 -F 选项也会刷新binlog日志；
</code></pre><h2 id="4-重置-清空-所有binlog日志"><a href="#4-重置-清空-所有binlog日志" class="headerlink" title="4.重置(清空)所有binlog日志"></a>4.重置(清空)所有binlog日志</h2><pre><code>mysql&gt; reset master;
</code></pre><h1 id="四、查看某个binlog日志内容，常用有两种方式："><a href="#四、查看某个binlog日志内容，常用有两种方式：" class="headerlink" title="四、查看某个binlog日志内容，常用有两种方式："></a>四、查看某个binlog日志内容，常用有两种方式：</h1><h2 id="1-使用mysqlbinlog自带查看命令法："><a href="#1-使用mysqlbinlog自带查看命令法：" class="headerlink" title="1.使用mysqlbinlog自带查看命令法："></a>1.使用mysqlbinlog自带查看命令法：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">注: binlog是二进制文件，普通文件查看器cat more vi等都无法打开，必须使用自带的 mysqlbinlog 命令查看</span><br><span class="line">    binlog日志与数据库文件在同目录中(我的环境配置安装是选择在/usr/local/mysql/data中)</span><br><span class="line">在MySQL5.5以下版本使用mysqlbinlog命令时如果报错，就加上 “--no-defaults”选项</span><br><span class="line">    </span><br><span class="line"># /usr/local/mysql/bin/mysqlbinlog /usr/local/mysql/data/mysql-bin.000013</span><br><span class="line">  下面截取一个片段分析：(得知可以用–base64-output=DECODE-ROWS -v查看出来sql语句)</span><br><span class="line"></span><br><span class="line">   ...............................................................................</span><br><span class="line">   # at 552</span><br><span class="line">   #131128 17:50:46 server id 1  end_log_pos 665   Query   thread_id=11    exec_time=0     error_code=0 ----&gt;执行时间:17:50:46；pos点:665</span><br><span class="line">   SET TIMESTAMP=1385632246/*!*/;</span><br><span class="line">   update zyyshop.stu set name=&apos;李四&apos; where id=4              ----&gt;执行的SQL</span><br><span class="line">   /*!*/;</span><br><span class="line">   # at 665</span><br><span class="line">   #131128 17:50:46 server id 1  end_log_pos 692   Xid = 1454 ----&gt;执行时间:17:50:46；pos点:692 </span><br><span class="line">   ...............................................................................</span><br><span class="line"></span><br><span class="line">   注: server id 1     数据库主机的服务号；</span><br><span class="line">       end_log_pos 665 pos点</span><br><span class="line">       thread_id=11    线程号</span><br></pre></td></tr></table></figure>
<h2 id="2-上面这种办法读取出binlog日志的全文内容较多，不容易分辨查看pos点信息，这里介绍一种更为方便的查询命令："><a href="#2-上面这种办法读取出binlog日志的全文内容较多，不容易分辨查看pos点信息，这里介绍一种更为方便的查询命令：" class="headerlink" title="2.上面这种办法读取出binlog日志的全文内容较多，不容易分辨查看pos点信息，这里介绍一种更为方便的查询命令："></a>2.上面这种办法读取出binlog日志的全文内容较多，不容易分辨查看pos点信息，这里介绍一种更为方便的查询命令：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show binlog events [IN &apos;log_name&apos;] [FROM pos] [LIMIT [offset,] row_count];</span><br><span class="line"></span><br><span class="line">       选项解析：</span><br><span class="line">         IN &apos;log_name&apos;   指定要查询的binlog文件名(不指定就是第一个binlog文件)</span><br><span class="line">         FROM pos        指定从哪个pos起始点开始查起(不指定就是从整个文件首个pos点开始算)</span><br><span class="line">         LIMIT [offset,] 偏移量(不指定就是0)</span><br><span class="line">         row_count       查询总条数(不指定就是所有行)</span><br><span class="line"></span><br><span class="line">       截取部分查询结果：</span><br><span class="line">       *************************** 20. row ***************************</span><br><span class="line">          Log_name: mysql-bin.000021  ----------------------------------------------&gt; 查询的binlog日志文件名</span><br><span class="line">               Pos: 11197 ----------------------------------------------------------&gt; pos起始点:</span><br><span class="line">        Event_type: Query ----------------------------------------------------------&gt; 事件类型：Query</span><br><span class="line">         Server_id: 1 --------------------------------------------------------------&gt; 标识是由哪台服务器执行的</span><br><span class="line">       End_log_pos: 11308 ----------------------------------------------------------&gt; pos结束点:11308(即：下行的pos起始点)</span><br><span class="line">              Info: use `zyyshop`; INSERT INTO `team2` VALUES (0,345,&apos;asdf8er5&apos;) ---&gt; 执行的sql语句</span><br><span class="line">       *************************** 21. row ***************************</span><br><span class="line">          Log_name: mysql-bin.000021</span><br><span class="line">               Pos: 11308 ----------------------------------------------------------&gt; pos起始点:11308(即：上行的pos结束点)</span><br><span class="line">        Event_type: Query</span><br><span class="line">         Server_id: 1</span><br><span class="line">       End_log_pos: 11417</span><br><span class="line">              Info: use `zyyshop`; /*!40000 ALTER TABLE `team2` ENABLE KEYS */</span><br><span class="line">       *************************** 22. row ***************************</span><br><span class="line">          Log_name: mysql-bin.000021</span><br><span class="line">               Pos: 11417</span><br><span class="line">        Event_type: Query</span><br><span class="line">         Server_id: 1</span><br><span class="line">       End_log_pos: 11510</span><br><span class="line">              Info: use `zyyshop`; DROP TABLE IF EXISTS `type`</span><br><span class="line"></span><br><span class="line">这条语句可以将指定的binlog日志文件，分成有效事件行的方式返回，并可使用limit指定pos点的起始偏移，查询条数；</span><br></pre></td></tr></table></figure>
<h3 id="A-查询第一个-最早-的binlog日志："><a href="#A-查询第一个-最早-的binlog日志：" class="headerlink" title="A.查询第一个(最早)的binlog日志："></a>A.查询第一个(最早)的binlog日志：</h3><pre><code>mysql&gt; show binlog events\G; 
</code></pre><h3 id="B-指定查询-mysql-bin-000021-这个文件："><a href="#B-指定查询-mysql-bin-000021-这个文件：" class="headerlink" title="B.指定查询 mysql-bin.000021 这个文件："></a>B.指定查询 mysql-bin.000021 这个文件：</h3><pre><code>mysql&gt; show binlog events in &apos;mysql-bin.000021&apos;\G;
</code></pre><h3 id="C-指定查询-mysql-bin-000021-这个文件，从pos点-8224开始查起："><a href="#C-指定查询-mysql-bin-000021-这个文件，从pos点-8224开始查起：" class="headerlink" title="C.指定查询 mysql-bin.000021 这个文件，从pos点:8224开始查起："></a>C.指定查询 mysql-bin.000021 这个文件，从pos点:8224开始查起：</h3><pre><code>mysql&gt; show binlog events in &apos;mysql-bin.000021&apos; from 8224\G;
</code></pre><h3 id="D-指定查询-mysql-bin-000021-这个文件，从pos点-8224开始查起，查询10条"><a href="#D-指定查询-mysql-bin-000021-这个文件，从pos点-8224开始查起，查询10条" class="headerlink" title="D.指定查询 mysql-bin.000021 这个文件，从pos点:8224开始查起，查询10条"></a>D.指定查询 mysql-bin.000021 这个文件，从pos点:8224开始查起，查询10条</h3><pre><code>mysql&gt; show binlog events in &apos;mysql-bin.000021&apos; from 8224 limit 10\G;
</code></pre><h3 id="E-指定查询-mysql-bin-000021-这个文件，从pos点-8224开始查起，偏移2行，查询10条"><a href="#E-指定查询-mysql-bin-000021-这个文件，从pos点-8224开始查起，偏移2行，查询10条" class="headerlink" title="E.指定查询 mysql-bin.000021 这个文件，从pos点:8224开始查起，偏移2行，查询10条"></a>E.指定查询 mysql-bin.000021 这个文件，从pos点:8224开始查起，偏移2行，查询10条</h3><pre><code>mysql&gt; show binlog events in &apos;mysql-bin.000021&apos; from 8224 limit 2,10\G;
</code></pre><h1 id="五、恢复binlog日志实验-zyyshop是数据库"><a href="#五、恢复binlog日志实验-zyyshop是数据库" class="headerlink" title="五、恢复binlog日志实验(zyyshop是数据库)"></a>五、恢复binlog日志实验(zyyshop是数据库)</h1><h2 id="1-假设现在是凌晨4-00，我的计划任务开始执行一次完整的数据库备份："><a href="#1-假设现在是凌晨4-00，我的计划任务开始执行一次完整的数据库备份：" class="headerlink" title="1.假设现在是凌晨4:00，我的计划任务开始执行一次完整的数据库备份："></a>1.假设现在是凌晨4:00，我的计划任务开始执行一次完整的数据库备份：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">将zyyshop数据库备份到 /root/BAK.zyyshop.sql 文件中：</span><br><span class="line"># /usr/local/mysql/bin/mysqldump -uroot -p123456 -lF --log-error=/root/myDump.err -B zyyshop &gt; /root/BAK.zyyshop.sql</span><br><span class="line">  ......</span><br><span class="line"></span><br><span class="line">  大约过了若干分钟，备份完成了，我不用担心数据丢失了，因为我有备份了，嘎嘎~~~</span><br><span class="line"></span><br><span class="line">由于我使用了-F选项，当备份工作刚开始时系统会刷新log日志，产生新的binlog日志来记录备份之后的数据库“增删改”操作，查看一下：</span><br><span class="line">mysql&gt; show master status;</span><br><span class="line">+------------------+----------+--------------+------------------+</span><br><span class="line">| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |</span><br><span class="line">+------------------+----------+--------------+------------------+</span><br><span class="line">| mysql-bin.000023 |      120 |              |                  |</span><br><span class="line">+------------------+----------+--------------+------------------+</span><br><span class="line">也就是说， mysql-bin.000023 是用来记录4:00之后对数据库的所有“增删改”操作。</span><br></pre></td></tr></table></figure>
<h2 id="2-早9-00上班了，业务的需求会对数据库进行各种“增删改”操作"><a href="#2-早9-00上班了，业务的需求会对数据库进行各种“增删改”操作" class="headerlink" title="2.早9:00上班了，业务的需求会对数据库进行各种“增删改”操作~~~"></a>2.早9:00上班了，业务的需求会对数据库进行各种“增删改”操作<del>~</del>~~</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">@ 比如：创建一个学生表并插入、修改了数据等等：</span><br><span class="line">  CREATE TABLE IF NOT EXISTS `tt` (</span><br><span class="line">    `id` int(10) unsigned NOT NULL AUTO_INCREMENT,</span><br><span class="line">    `name` varchar(16) NOT NULL,</span><br><span class="line">    `sex` enum(&apos;m&apos;,&apos;w&apos;) NOT NULL DEFAULT &apos;m&apos;,</span><br><span class="line">    `age` tinyint(3) unsigned NOT NULL,</span><br><span class="line">    `classid` char(6) DEFAULT NULL,</span><br><span class="line">    PRIMARY KEY (`id`)</span><br><span class="line">   ) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">导入实验数据</span><br><span class="line">mysql&gt; insert into zyyshop.tt(`name`,`sex`,`age`,`classid`) values(&apos;yiyi&apos;,&apos;w&apos;,20,&apos;cls1&apos;),(&apos;xiaoer&apos;,&apos;m&apos;,22,&apos;cls3&apos;),(&apos;zhangsan&apos;,&apos;w&apos;,21,&apos;cls5&apos;),(&apos;lisi&apos;,&apos;m&apos;,20,&apos;cls4&apos;),(&apos;wangwu&apos;,&apos;w&apos;,26,&apos;cls6&apos;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查看数据</span><br><span class="line">mysql&gt; select * from zyyshop.tt;</span><br><span class="line">+----+----------+-----+-----+---------+</span><br><span class="line">| id | name     | sex | age | classid |</span><br><span class="line">+----+----------+-----+-----+---------+</span><br><span class="line">|  1 | yiyi     | w   |  20 | cls1    |</span><br><span class="line">|  2 | xiaoer   | m   |  22 | cls3    |</span><br><span class="line">|  3 | zhangsan | w   |  21 | cls5    |</span><br><span class="line">|  4 | lisi     | m   |  20 | cls4    |</span><br><span class="line">|  5 | wangwu   | w   |  26 | cls6    |</span><br><span class="line">+----+----------+-----+-----+---------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">中午时分又执行了修改数据操作</span><br><span class="line">mysql&gt; update zyyshop.tt set name=&apos;李四&apos; where id=4;</span><br><span class="line">mysql&gt; update zyyshop.tt set name=&apos;小二&apos; where id=2;</span><br><span class="line"></span><br><span class="line">修改后的结果：</span><br><span class="line">mysql&gt; select * from zyyshop.tt;</span><br><span class="line">+----+----------+-----+-----+---------+</span><br><span class="line">| id | name     | sex | age | classid |</span><br><span class="line">+----+----------+-----+-----+---------+</span><br><span class="line">|  1 | yiyi     | w   |  20 | cls1    |</span><br><span class="line">|  2 | 小二     | m   |  22 | cls3    |</span><br><span class="line">|  3 | zhangsan | w   |  21 | cls5    |</span><br><span class="line">|  4 | 李四     | m   |  20 | cls4    |</span><br><span class="line">|  5 | wangwu   | w   |  26 | cls6    |</span><br><span class="line">+----+----------+-----+-----+---------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">假设此时是下午18:00，莫名地执行了一条悲催的SQL语句，整个数据库都没了：</span><br><span class="line">mysql&gt; drop database zyyshop;</span><br></pre></td></tr></table></figure>
<h2 id="3-此刻杯具了，别慌！先仔细查看最后一个binlog日志，并记录下关键的pos点，到底是哪个pos点的操作导致了数据库的破坏-通常在最后几步-；"><a href="#3-此刻杯具了，别慌！先仔细查看最后一个binlog日志，并记录下关键的pos点，到底是哪个pos点的操作导致了数据库的破坏-通常在最后几步-；" class="headerlink" title="3.此刻杯具了，别慌！先仔细查看最后一个binlog日志，并记录下关键的pos点，到底是哪个pos点的操作导致了数据库的破坏(通常在最后几步)；"></a>3.此刻杯具了，别慌！先仔细查看最后一个binlog日志，并记录下关键的pos点，到底是哪个pos点的操作导致了数据库的破坏(通常在最后几步)；</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">      备份一下最后一个binlog日志文件：</span><br><span class="line">      # ll /usr/local/mysql/data | grep mysql-bin</span><br><span class="line">      # cp -v /usr/local/mysql/data/mysql-bin.000023 /root/</span><br><span class="line"></span><br><span class="line">      此时执行一次刷新日志索引操作，重新开始新的binlog日志记录文件，理论说 mysql-bin.000023 这个文件不会再有后续写入了(便于我们分析原因及查找pos点)，以后所有数据库操作都会写入到下一个日志文件；</span><br><span class="line">      mysql&gt; flush logs;</span><br><span class="line">      mysql&gt; show master status;</span><br><span class="line">```     </span><br><span class="line"></span><br><span class="line">##    4.读取binlog日志，分析问题</span><br><span class="line">``` </span><br><span class="line">      方式一：使用mysqlbinlog读取binlog日志：</span><br><span class="line">        # /usr/local/mysql/bin/mysqlbinlog  /usr/local/mysql/data/mysql-bin.000023</span><br><span class="line"></span><br><span class="line">      方式二：登录服务器，并查看(推荐)：</span><br><span class="line">        mysql&gt; show binlog events in &apos;mysql-bin.000023&apos;;</span><br><span class="line">        </span><br><span class="line">        以下为末尾片段：</span><br><span class="line">        +------------------+------+------------+-----------+-------------+------------------------------------------------------------+</span><br><span class="line">        | Log_name         | Pos  | Event_type | Server_id | End_log_pos | Info                                                       |</span><br><span class="line">        +------------------+------+------------+-----------+-------------+------------------------------------------------------------+</span><br><span class="line">        | mysql-bin.000023 |  922 | Xid        |         1 |         953 | COMMIT /* xid=3820 */                                      |</span><br><span class="line">        | mysql-bin.000023 |  953 | Query      |         1 |        1038 | BEGIN                                                      |</span><br><span class="line">        | mysql-bin.000023 | 1038 | Query      |         1 |        1164 | use `zyyshop`; update zyyshop.tt set name=&apos;李四&apos; where id=4|</span><br><span class="line">        | mysql-bin.000023 | 1164 | Xid        |         1 |        1195 | COMMIT /* xid=3822 */                                      |</span><br><span class="line">        | mysql-bin.000023 | 1195 | Query      |         1 |        1280 | BEGIN                                                      |</span><br><span class="line">        | mysql-bin.000023 | 1280 | Query      |         1 |        1406 | use `zyyshop`; update zyyshop.tt set name=&apos;小二&apos; where id=2|</span><br><span class="line">        | mysql-bin.000023 | 1406 | Xid        |         1 |        1437 | COMMIT /* xid=3823 */                                      |</span><br><span class="line">        | mysql-bin.000023 | 1437 | Query      |         1 |        1538 | drop database zyyshop                                      |</span><br><span class="line">        +------------------+------+------------+-----------+-------------+------------------------------------------------------------+</span><br><span class="line"></span><br><span class="line">        通过分析，造成数据库破坏的pos点区间是介于 1437--1538 之间，只要恢复到1437前就可。</span><br></pre></td></tr></table></figure>
<h2 id="5-现在把凌晨备份的数据恢复："><a href="#5-现在把凌晨备份的数据恢复：" class="headerlink" title="5.现在把凌晨备份的数据恢复："></a>5.现在把凌晨备份的数据恢复：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># /usr/local/mysql/bin/mysql -uroot -p123456 -v &lt; /root/BAK.zyyshop.sql;</span><br><span class="line"></span><br><span class="line">注: 至此截至当日凌晨(4:00)前的备份数据都恢复了。</span><br><span class="line">    但今天一整天(4:00--18:00)的数据肿么办呢？就得从前文提到的 mysql-bin.000023 新日志做文章了......</span><br></pre></td></tr></table></figure>
<h2 id="6-从binlog日志恢复数据"><a href="#6-从binlog日志恢复数据" class="headerlink" title="6.从binlog日志恢复数据"></a>6.从binlog日志恢复数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">恢复语法格式：</span><br><span class="line"># mysqlbinlog mysql-bin.0000xx | mysql -u用户名 -p密码 数据库名</span><br><span class="line"></span><br><span class="line">  常用选项：</span><br><span class="line">    --start-position=953                   起始pos点</span><br><span class="line">    --stop-position=1437                   结束pos点</span><br><span class="line">    --start-datetime=&quot;2013-11-29 13:18:54&quot; 起始时间点</span><br><span class="line">    --stop-datetime=&quot;2013-11-29 13:21:53&quot;  结束时间点</span><br><span class="line">    --database=zyyshop                     指定只恢复zyyshop数据库(一台主机上往往有多个数据库，只限本地log日志)</span><br><span class="line">      </span><br><span class="line">  不常用选项：    </span><br><span class="line">    -u --user=name              Connect to the remote server as username.连接到远程主机的用户名</span><br><span class="line">    -p --password[=name]        Password to connect to remote server.连接到远程主机的密码</span><br><span class="line">    -h --host=name              Get the binlog from server.从远程主机上获取binlog日志</span><br><span class="line">    --read-from-remote-server   Read binary logs from a MySQL server.从某个MySQL服务器上读取binlog日志</span><br></pre></td></tr></table></figure>
<h1 id="小结：实际是将读出的binlog日志内容，通过管道符传递给mysql命令。这些命令、文件尽量写成绝对路径；"><a href="#小结：实际是将读出的binlog日志内容，通过管道符传递给mysql命令。这些命令、文件尽量写成绝对路径；" class="headerlink" title="小结：实际是将读出的binlog日志内容，通过管道符传递给mysql命令。这些命令、文件尽量写成绝对路径；"></a>小结：实际是将读出的binlog日志内容，通过管道符传递给mysql命令。这些命令、文件尽量写成绝对路径；</h1><h2 id="A-完全恢复-本例不靠谱，因为最后那条-drop-database-zyyshop-也在日志里，必须想办法把这条破坏语句排除掉，做部分恢复"><a href="#A-完全恢复-本例不靠谱，因为最后那条-drop-database-zyyshop-也在日志里，必须想办法把这条破坏语句排除掉，做部分恢复" class="headerlink" title="A.完全恢复(本例不靠谱，因为最后那条 drop database zyyshop 也在日志里，必须想办法把这条破坏语句排除掉，做部分恢复)"></a>A.完全恢复(本例不靠谱，因为最后那条 drop database zyyshop 也在日志里，必须想办法把这条破坏语句排除掉，做部分恢复)</h2><pre><code># /usr/local/mysql/bin/mysqlbinlog  /usr/local/mysql/data/mysql-bin.000021 | /usr/local/mysql/bin/mysql -uroot -p123456 -v zyyshop 
</code></pre><h2 id="B-指定pos结束点恢复-部分恢复-："><a href="#B-指定pos结束点恢复-部分恢复-：" class="headerlink" title="B.指定pos结束点恢复(部分恢复)："></a>B.指定pos结束点恢复(部分恢复)：</h2><pre><code>@ --stop-position=953 pos结束点
注：此pos结束点介于“导入实验数据”与更新“name=&apos;李四&apos;”之间，这样可以恢复到更改“name=&apos;李四&apos;”之前的“导入测试数据”
# /usr/local/mysql/bin/mysqlbinlog --stop-position=953 --database=zyyshop /usr/local/mysql/data/mysql-bin.000023 | /usr/local/mysql/bin/mysql -uroot -p123456 -v zyyshop

在另一终端登录查看结果(成功恢复了)：
mysql&gt; select * from zyyshop.tt;
+----+----------+-----+-----+---------+
| id | name     | sex | age | classid |
+----+----------+-----+-----+---------+
|  1 | yiyi     | w   |  20 | cls1    |
|  2 | xiaoer   | m   |  22 | cls3    |
|  3 | zhangsan | w   |  21 | cls5    |
|  4 | lisi     | m   |  20 | cls4    |
|  5 | wangwu   | w   |  26 | cls6    |
+----+----------+-----+-----+---------+
</code></pre><h2 id="C-指定pso点区间恢复-部分恢复-："><a href="#C-指定pso点区间恢复-部分恢复-：" class="headerlink" title="C.指定pso点区间恢复(部分恢复)："></a>C.指定pso点区间恢复(部分恢复)：</h2><pre><code>更新 name=&apos;李四&apos; 这条数据，日志区间是Pos[1038] --&gt; End_log_pos[1164]，按事务区间是：Pos[953] --&gt; End_log_pos[1195]；

更新 name=&apos;小二&apos; 这条数据，日志区间是Pos[1280] --&gt; End_log_pos[1406]，按事务区间是：Pos[1195] --&gt; End_log_pos[1437]；

c1.单独恢复 name=&apos;李四&apos; 这步操作，可这样：
   # /usr/local/mysql/bin/mysqlbinlog --start-position=1038 --stop-position=1164 --database=zyyshop  /usr/local/mysql/data/mysql-bin.000023 | /usr/local/mysql/bin/mysql -uroot -p123456 -v zyyshop

   也可以按事务区间单独恢复，如下：
   # /usr/local/mysql/bin/mysqlbinlog --start-position=953 --stop-position=1195 --database=zyyshop  /usr/local/mysql/data/mysql-bin.000023 | /usr/local/mysql/bin/mysql -uroot -p123456 -v zyyshop


c2.单独恢复 name=&apos;小二&apos; 这步操作，可这样：
   # /usr/local/mysql/bin/mysqlbinlog --start-position=1280 --stop-position=1406 --database=zyyshop  /usr/local/mysql/data/mysql-bin.000023 | /usr/local/mysql/bin/mysql -uroot -p123456 -v zyyshop

   也可以按事务区间单独恢复，如下：
   # /usr/local/mysql/bin/mysqlbinlog --start-position=1195 --stop-position=1437 --database=zyyshop  /usr/local/mysql/data/mysql-bin.000023 | /usr/local/mysql/bin/mysql -uroot -p123456 -v zyyshop


c3.将 name=&apos;李四&apos;、name=&apos;小二&apos; 多步操作一起恢复，需要按事务区间，可这样：
   # /usr/local/mysql/bin/mysqlbinlog --start-position=953 --stop-position=1437 --database=zyyshop  /usr/local/mysql/data/mysql-bin.000023 | /usr/local/mysql/bin/mysql -uroot -p123456 -v zyyshop
</code></pre><h2 id="D-在另一终端登录查看目前结果-两名称也恢复了-："><a href="#D-在另一终端登录查看目前结果-两名称也恢复了-：" class="headerlink" title="D.在另一终端登录查看目前结果(两名称也恢复了)："></a>D.在另一终端登录查看目前结果(两名称也恢复了)：</h2><pre><code>mysql&gt; select * from zyyshop.tt;
+----+----------+-----+-----+---------+
| id | name     | sex | age | classid |
+----+----------+-----+-----+---------+
|  1 | yiyi     | w   |  20 | cls1    |
|  2 | 小二     | m   |  22 | cls3    |
|  3 | zhangsan | w   |  21 | cls5    |
|  4 | 李四     | m   |  20 | cls4    |
|  5 | wangwu   | w   |  26 | cls6    |
+----+----------+-----+-----+---------+
</code></pre><h2 id="E-也可指定时间区间恢复-部分恢复-：除了用pos点的办法进行恢复，也可以通过指定时间区间进行恢复，按时间恢复需要用mysqlbinlog命令读取binlog日志内容，找时间节点。"><a href="#E-也可指定时间区间恢复-部分恢复-：除了用pos点的办法进行恢复，也可以通过指定时间区间进行恢复，按时间恢复需要用mysqlbinlog命令读取binlog日志内容，找时间节点。" class="headerlink" title="E.也可指定时间区间恢复(部分恢复)：除了用pos点的办法进行恢复，也可以通过指定时间区间进行恢复，按时间恢复需要用mysqlbinlog命令读取binlog日志内容，找时间节点。"></a>E.也可指定时间区间恢复(部分恢复)：除了用pos点的办法进行恢复，也可以通过指定时间区间进行恢复，按时间恢复需要用mysqlbinlog命令读取binlog日志内容，找时间节点。</h2><pre><code>  比如，我把刚恢复的tt表删除掉，再用时间区间点恢复
  mysql&gt; drop table tt;

  @ --start-datetime=&quot;2013-11-29 13:18:54&quot;  起始时间点
  @ --stop-datetime=&quot;2013-11-29 13:21:53&quot;   结束时间点

  # /usr/local/mysql/bin/mysqlbinlog --start-datetime=&quot;2013-11-29 13:18:54&quot; --stop-datetime=&quot;2013-11-29 13:21:53&quot; --database=zyyshop /usr/local/mysql/data/mysql-bin.000021 | /usr/local/mysql/bin/mysql -uroot -p123456 -v zyyshop

总结：所谓恢复，就是让mysql将保存在binlog日志中指定段落区间的sql语句逐个重新执行一次而已。
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://alexguo.net/2018/12/28/MySQL的binlog日志/" data-id="ck8qxvlb80045joy776qo68le" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bin-log/">bin_log</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/04/08/hexo-常用命令/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          hexo 常用命令
        
      </div>
    </a>
  
  
    <a href="/2018/12/28/大数据之数据采集方法/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">大数据之数据采集方法</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/no-sql/">no sql</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/大数据/">大数据</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/家常/">家常</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/常用工具/">常用工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络/">网络</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/EventBus/">EventBus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NIO/">NIO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bin-log/">bin_log</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/">elasticsearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/filebeat/">filebeat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flume/">flume</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitlab/">gitlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hbase/">hbase</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hdfs/">hdfs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java基础/">java基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jvm/">jvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kafka/">kafka</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logstash/">logstash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logstash-forward/">logstash-forward</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/netty/">netty</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pcloud/">pcloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rocketMQ/">rocketMQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spark/">spark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-cloud/">spring cloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-cloud-stream/">spring cloud stream</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-rabbitMQ/">spring rabbitMQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/其他/">其他</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据采集/">数据采集</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日志分析/">日志分析</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/EventBus/" style="font-size: 10px;">EventBus</a> <a href="/tags/NIO/" style="font-size: 10px;">NIO</a> <a href="/tags/bin-log/" style="font-size: 13.33px;">bin_log</a> <a href="/tags/docker/" style="font-size: 13.33px;">docker</a> <a href="/tags/elasticsearch/" style="font-size: 10px;">elasticsearch</a> <a href="/tags/filebeat/" style="font-size: 10px;">filebeat</a> <a href="/tags/flume/" style="font-size: 10px;">flume</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/gitlab/" style="font-size: 10px;">gitlab</a> <a href="/tags/hbase/" style="font-size: 10px;">hbase</a> <a href="/tags/hdfs/" style="font-size: 10px;">hdfs</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/java基础/" style="font-size: 10px;">java基础</a> <a href="/tags/jvm/" style="font-size: 13.33px;">jvm</a> <a href="/tags/kafka/" style="font-size: 10px;">kafka</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/logstash/" style="font-size: 10px;">logstash</a> <a href="/tags/logstash-forward/" style="font-size: 10px;">logstash-forward</a> <a href="/tags/mongodb/" style="font-size: 10px;">mongodb</a> <a href="/tags/mysql/" style="font-size: 16.67px;">mysql</a> <a href="/tags/netty/" style="font-size: 10px;">netty</a> <a href="/tags/pcloud/" style="font-size: 20px;">pcloud</a> <a href="/tags/rocketMQ/" style="font-size: 10px;">rocketMQ</a> <a href="/tags/spark/" style="font-size: 10px;">spark</a> <a href="/tags/spring/" style="font-size: 10px;">spring</a> <a href="/tags/spring-cloud/" style="font-size: 10px;">spring cloud</a> <a href="/tags/spring-cloud-stream/" style="font-size: 10px;">spring cloud stream</a> <a href="/tags/spring-rabbitMQ/" style="font-size: 10px;">spring rabbitMQ</a> <a href="/tags/其他/" style="font-size: 13.33px;">其他</a> <a href="/tags/数据采集/" style="font-size: 10px;">数据采集</a> <a href="/tags/日志分析/" style="font-size: 10px;">日志分析</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/04/08/hexo-常用命令/">hexo 常用命令</a>
          </li>
        
          <li>
            <a href="/2018/12/28/MySQL的binlog日志/">MySQL的binlog日志</a>
          </li>
        
          <li>
            <a href="/2018/12/28/大数据之数据采集方法/">大数据之数据采集方法</a>
          </li>
        
          <li>
            <a href="/2018/12/27/深入理解mongodb和hbase区别/">深入理解mongodb和hbase区别</a>
          </li>
        
          <li>
            <a href="/2018/12/19/大数据采集方案：mysql-binlog-注意点/">大数据采集方案：mysql-binlog 注意点</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Alex Guo<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>